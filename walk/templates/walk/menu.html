<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>산책로 추천</title>
    <script src="http://code.jquery.com/jquery-1.11.0.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7yUrMo4NRmNvcF_vyxBoHuZsikOgqz7Q"></script>
    <script>
        var latitude = 0;
        var longitude = 0;

        var result = [];


        // 현재 위치의 위도와 경도 반환해주는 함수
        navigator.geolocation.getCurrentPosition(function(pos) {
            latitude = pos.coords.latitude;
            longitude = pos.coords.longitude;
            alert("현재 위치는 : " + latitude + ", "+ longitude);
        });


        // 위도와 경도로 두 장소 간 거리 계산해주는 함수
        function getDistanceFromLatLonInKm(lat1, lng1, lat2, lng2) {
            function deg2rad(deg) {
                return deg * (Math.PI/180)
            }
            var R = 6371; // Radius of the earth in km
            var dLat = deg2rad(lat2-lat1); // deg2rad below
            var dLon = deg2rad(lng2-lng1);
            var a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon/2) * Math.sin(dLon/2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            var d = R * c; // Distance in km
            return d;
        }


        // // html 테이블에서 js 배열로 값 저장
        // function getTableData() {
        //     var table = document.getElementById('dataTable');
        //
        //     for (var i = 1; i < table.rows.length; i++) {
        //         var obj = {};
        //         for (var j = 0; j < table.rows[i].cells.length; j++) {
        //             var k = table.rows[0].cells[j].innerText;
        //             obj[k] = table.rows[i].cells[j].innerText;
        //         }
        //         result.push(obj);
        //     }
        // }
        //
        //
        // // 현재 위치와 장소 사이 거리 저장
        // function getDistance() {
        //     getTableData();
        //
        //     for (var i = 0; i < result.length; i++) {
        //         result[i]['distance'] = getDistanceFromLatLonInKm(latitude, longitude, result[i]['latitude'], result[i]['longitude']);
        //     }
        //
        //     console.log(result);
        // }
        //
        //
        // // 거리에 따라 배열 정렬
        // function dataSort() {
        //     getDistance();
        //
        //     result.sort(function(a, b) {
        //         return a['distance'] - b['distance'];
        //     })
        // }
    </script>
</head>
<body>

    <h1>산책로 추천</h1>

<!--    <input type="button" value="방법1" onclick="dataSort()"/>-->

<!--    <table id="dataTable">-->
<!--        <tr>-->
<!--            <th>name</th>-->
<!--            <th>address</th>-->
<!--            <th>latitude</th>-->
<!--            <th>longitude</th>-->
<!--            <th>image</th>-->
<!--        </tr>-->
<!--        {% for p in parks %}-->
<!--            <tr>-->
<!--                <td>{{p.name}}</td>-->
<!--                <td>{{p.address}}</td>-->
<!--                <td>{{p.latitude}}</td>-->
<!--                <td>{{p.longitude}}</td>-->
<!--                <td>{{p.image}}</td>-->
<!--            </tr>-->
<!--        {%endfor%}-->
<!--    </table>-->
</body>
</html>